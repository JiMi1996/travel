<#include "/admin/layout/layout.ftl"><#import "/admin/layout/macro.ftl" as macro><#assign css></#assign><#assign js><script>    $("#ticketName").change(function () {        var opt = $("#ticketName").val()        $.ajax({            type:"POST",            url:"${ctx!}/ticket/getByName",            data:"opt="+opt,            dataType:"text",            success:function (res) {                $("#price").val(res);            }        })    })    $(".btn-submit").click(function () {        $.ajax({            type: "POST",            url: "${ctx!}/memory/change",            data: $(".form-edit").serialize(),            dataType: "JSON",            success: function(res){                layer.msg("添加成功", {time: 2000                }, function(){                    location.reload();                });            }        });    });</script></#assign><@layout title="购物车" active="memory"><!-- Content Header (Page header) --><section class="content-header">    <h1>        购物车编辑        <small>编辑购物车详细信息</small>    </h1>    <ol class="breadcrumb">        <li><a href="#"><i class="fa fa-cog"></i> 系统</a></li>        <li><a href="#"><i class="fa fa-list-ul"></i> 购物车管理</a></li>        <li class="active"><i class="fa fa-edit"></i> 购物车编辑</li>    </ol></section><!-- Main content --><section class="content">    <div class="row">        <div class="col-md-10">            <!-- Default box -->            <div class="box  box-primary">                <form class="form-horizontal form-edit" method="post" action="${ctx!}/memory/change">                    <#list list as memoryList>                        <div class="box-body">                            <input type="hidden" id="id" name="id" value="${(memoryList.memory.id)!}">                            <div class="form-group">                                <label class="col-sm-2 control-label">用户：</label>                                <div class="col-sm-10">                                        <input id="userName" name="userName" class="form-control" type="text" value="${(memoryList.userName)!}" readonly>                                </div>                            </div>                            <div class="form-group">                                <label class="col-sm-2 control-label">景点：</label>                                <div class="col-sm-10">                                    <select id="ticketName"  name="ticketName" class="form-control">                                        <#list memoryList.ticketList as ticket>                                            <option value="${ticket.id}" <#if ticket.name == memoryList.ticketName>selected</#if> >${ticket.name}                                        </#list>                                    </select>                                </div>                            </div>                            <div class="form-group">                                <label class="col-sm-2 control-label">票价：</label>                                <div class="col-sm-10">                                        <input id="price" name="price" class="form-control" type="text" value="${(memoryList.ticketPrice)!}" readonly>                                </div>                            </div>                            <div class="form-group">                                <label class="col-sm-2 control-label">购买日期：</label>                                <div class="col-sm-10">                                    <#if (memoryList.memory.id)??>                                        <input type="date" id="buydate" name="buydate" class="form-control"  value="${(memoryList.memory.buydate?string('yyyy-MM-dd'))!}" min="${.now?string("yyyy-MM-dd")}"readonly/>                                    <#else>                                        <input type="date" id="buydate" name="buydate" class="form-control"  value="${.now?string("yyyy-MM-dd")}" min="${.now?string("yyyy-MM-dd")}"/>                                    </#if>                                </div>                            </div>                            <div class="form-group">                                <label class="col-sm-2 control-label">出行日期：</label>                                <div class="col-sm-10">                                    <input type="date" id="godate" name="godate" class="form-control"  value="${(memoryList.memory.godate?string('yyyy-MM-dd'))!}"                                           min="${.now?string("yyyy-MM-dd")}"/>                                </div>                            </div>                        </div>                        <div class="box-footer">                            <button type="button" class="btn btn-default btn-back">返回</button>                            <button type="button" class="btn btn-info pull-right btn-submit">提交</button>                        </div>                    </#list>                </form>            </div>            <!-- /.box -->        </div>    </div></section><!-- /.content --></@layout>