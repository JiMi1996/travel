package com.wind.web;import com.wind.config.WebMvcConfig;import com.wind.mybatis.pojo.User;import org.springframework.stereotype.Controller;import org.springframework.ui.ModelMap;import org.springframework.web.bind.annotation.PostMapping;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.ResponseBody;import org.springframework.web.multipart.MultipartFile;import javax.servlet.http.HttpServletRequest;import javax.servlet.http.HttpSession;import java.io.File;import java.io.FileOutputStream;@Controllerpublic class IndexController {    @RequestMapping("/login")    public String index(ModelMap map){        return "admin/login";    }    @RequestMapping("/index")    public String refer(HttpSession session, ModelMap modelMap){        User user = (User)session.getAttribute(WebMvcConfig.SESSION_KEY);        modelMap.put("userInfo", user);        return "admin/index";    }    //上传图片    @PostMapping("/upload")    @ResponseBody    public String upload(MultipartFile file,HttpServletRequest request){        String contentType = file.getContentType();        String fileName = file.getOriginalFilename();        String filePath = request.getSession().getServletContext().getRealPath("assets/img/");        try {           File targetFile = new File(filePath);           if(!targetFile.exists()){               targetFile.mkdirs();           }           FileOutputStream out = new FileOutputStream(filePath+fileName);           out.write(file.getBytes());           out.flush();           out.close();        } catch (Exception e) {            e.printStackTrace();        }        System.out.println(filePath+fileName);        return filePath+fileName;    }}